# polarion test case id: CEPH-83593390
# test scripts : test_sts_using_boto_session_policy.py
config:
     bucket_count: 2
     objects_count: 20
     objects_size_range:
          min: 5
          max: 15
     test_ops:
          create_bucket: true
          create_object: true
          verify_policy: session_policy
     sts:
          policy_document:
               "Version": "2012-10-17"
               "Statement":
                    [
                         {
                              "Effect": "Allow",
                              "Principal":
                                   {
                                        "AWS":
                                             ["arn:aws:iam:::user/<user_name>"],
                                   },
                              "Action": ["sts:AssumeRole"],
                         },
                    ]
          role_policy:
              "Version": "2012-10-17",
               "Statement":
                [
                   {
                       "Effect": "Allow",
                       "Action": [
                           "s3:GetObject",
                           "s3:ListBucketMultipartUploads",
                           "s3:ListMultipartUploadParts",
                           "s3:GetBucketLocation",
                           "s3:ListBucket",
                           "s3:ListAllMyBuckets",
                           "s3:AbortMultipartUpload",
                           "s3:DeleteObject",
                           "s3:PutObject"
                       ],
                       "Resource": "arn:aws:s3::tenant2:*"
                   }
               ]
          session_policy:
              "Version": "2012-10-17",
              "Statement":
               [
                   {
                     "Effect": "Allow",
                     "Action": [
                       "s3:GetBucketLocation",
                       "s3:ListBucket*"
                     ],
                     "Resource": [
                       "arn:aws:s3::tenant2:<bucket_name>"
                     ]
                   },
                   {
                     "Effect": "Allow",
                     "Action": [
                       "s3:Get*",
                       "s3:PutObject",
                       "s3:PutObjectAcl",
                       "s3:DeleteObject",
                       "s3:AbortMultipartUpload"
                     ],
                     "Resource": [
                       "arn:aws:s3::tenant2:<bucket_name>/warehouse",
                       "arn:aws:s3::tenant2:<bucket_name>/warehouse/*",
                       "arn:aws:s3::tenant2:<bucket_name>/warehouse/"
                     ]
                   },
                   {
                     "Effect": "Allow",
                     "Action": [
                       "s3:DeleteObject"
                     ],
                     "Resource": [
                       "arn:aws:s3::tenant2:<bucket_name>"
                     ]
                   }
               ]